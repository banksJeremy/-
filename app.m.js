(function(){var a,b,c,d=Array.prototype.slice;typeof log!="undefined"&&log!==null?log:log=function(){var a,b;b=a,a=1<=b.length?d.call(b,0):[];return typeof console!="undefined"&&console!==null?typeof console.log=="function"?console.log.apply(console,a):void 0:void 0},c=function(c){var d,e,f;d=$("body"),d.css({font:"14pt Helvetica"}),e=$("<h1>").html("<span>Tra<span>Q</span>k</span>"),d.append(e),log("Putting filler values into database."),f=[],f.push({foo:"Bar"},{time:99,age:20,subject:2}),f.push({time:13},{subject:"CN Tower"}),a(c,"data",f,function(){return log("Filler values added.")}),log("Displaying all values");return b(c,"data",function(a){log("Got all values."),d.append($("<h2>").text("Current Data"));return d.append($("<pre>").text(JSON.stringify(a)))})},a=function(a,b,c,d){var e,f,g,h,i;f=a.transaction([b],IDBTransaction.READ_WRITE),e=f.objectStore(b);for(h=0,i=c.length;h<i;h++)g=c[h],e.add(g);f.onsuccess=d;return f.onerror=function(a){throw JSON.stringify(a)}},b=function(a,b,c){var d,e,f;f=a.transaction([b]),e=f.objectStore(b),d=[];return e.openCursor().onsuccess=function(){var a;a=event.target.result;return a?d.push(a.value):c(d)}},withDB(c,"data.db","0.1",function(a){var b;try{a.deleteObjectStore("data")}catch(c){}b=a.createObjectStore("data",{keyPath:"id",autoIncrement:!0}),b.createIndex("time","time");return b.createIndex("subject","subject")})}).call(this)