(function(){var a,b,c=Object.prototype.hasOwnProperty,d=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};jQuery.IndexedDB=function(){function a(a,b){var d;for(d in b){if(!c.call(b,d))continue;this[d]=new jQuery.IDBObjectStore(a,d)}}return a}(),jQuery.IDBObjectStore=function(){function a(a,b){this.db=a,this.name=b}a.prototype.get=function(a){return new jQuery.IDBResult};return a}(),jQuery.IDBResult=function(){function a(){}a.prototype.next=function(){var a;a=new jQuery.Deferred;return a},a.prototype.each=function(a){return!0};return a}(),jQuery.openDB=function(a,b,e){var f,g;e==null&&(e=!1),f=new jQuery.Deferred,g=indexedDB.open(a),g.onsuccess=function(h){var i,j,k,l,m,n,o,p,q,r,s;i=g.result;if($.isArray(b)){o={};for(r=0,s=b.length;r<s;r++)l=b[r],o[l]=[];b=o}n=[];for(l in b){if(!c.call(b,l))continue;p=b[l],p.sort(),n.push(l)}n.sort(),m="{"+function(){var d;d=[];for(l in b){if(!c.call(b,l))continue;k=b[l],d.push(""+JSON.stringify(a)+":"+JSON.stringify(k))}return d}().join(",")+"}",j=new $.IndexedDB(i,b);if(e||i.version!==m)q=i.setVersion(m),q.onsuccess=function(a){var f,h,k,l,m,n,o;console.log("TODO: Initialize stuff.                Each objectStore has an auto-incrementing ._id.");if(e)for(l=0,n=objectStoreNames.length;l<n;l++)k=objectStoreNames[l],i.deleteObjectStore(k);for(k in b){if(!c.call(b,k))continue;h=b[k],d.call(i.objectStoreNames,k)<0&&i.createObjectStore(k,{keyPath:"_id",autoIncrement:!0});for(m=0,o=h.length;m<o;m++)f=h[m],i.createIndex(k,f,{unique:!1})}return setTimeout(function(){return g.resolve(j)},0)},q.onerror=function(a){return f.reject("Error versioning database.",a)};return setTimeout(function(){return g.resolve(j)},0)},g.onerror=function(a){return f.reject("Error opening database.",a)};return f.promise()},window.indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.mIndexedDB||function(){throw new Error("Fatal Error: IndexedDB is unavailable.")}();for(b in window)if(a=/^[a-z]+(IDB.*)$/.exec(b))window[a[1]]=window[b]}).call(this)