(function(){jQuery(function(){var a,b,c;a=$("body"),a.append(c=$("<h1>").text("TraQk")),a.append(b=$("<div>")),a.css({margin:0,padding:0,background:"rgb(255, 252, 250)",fontFamily:"sans-serif",textAlign:"right"}),a.perlin({gridSpacing:1.413,color:[16,16,0],opacity:.1,tileable:!0}),c.css({background:"#222",borderBottom:".125em solid black",color:"white",padding:".125em .25em 0",margin:0,boxShadow:"0 0 .125em black",textAlign:"left",textIndent:".125em"}),$.makeBox=function(){var a;a=$("<div>"),a.css({textAlign:"left",display:"inline-block",height:"8em",width:"12em",background:"rgb(250, 255, 255)",fontSize:"1.5em",margin:".4em",border:".125em solid #111",padding:".4em",borderTopLeftRadius:"1em",boxShadow:".05em .05em .5em black",cursor:"pointer"}),a.hover(function(){return a.css({borderColor:"#FA2"})},function(){return a.css({borderColor:"black"})}),a.click(function(){return a.hide("0.2")}),a.perlin({gridSpacing:2.1,opacity:.05,tileable:!0}),a.hide(),b.prepend(a),setTimeout(function(){return a.show("0.4")},0);return a},$.makeBox().html("Hello, World!");return $.openDB("data.db",{data:["time","subject"]}).then(function(a){$.makeBox().text("Database loaded.");return a.get().each(function(a){return $.makeBox().text(JSON.stringfy(a))})})})}).call(this),function(){var a,b,c=Object.prototype.hasOwnProperty,d=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};jQuery.IndexedDB=function(){function a(a,b){var d;for(d in b){if(!c.call(b,d))continue;this[d]=new jQuery.IDBObjectStore(a,d)}}return a}(),jQuery.IDBObjectStore=function(){function a(a,b){this.db=a,this.name=b}a.prototype.get=function(a){return new jQuery.IDBResult};return a}(),jQuery.IDBResult=function(){function a(){}a.prototype.next=function(){var a;a=new jQuery.Deferred;return a},a.prototype.each=function(a){return!0};return a}(),jQuery.openDB=function(a,b,e){var f,g;e==null&&(e=!1),f=new jQuery.Deferred,g=indexedDB.open(a),g.onsuccess=function(h){var i,j,k,l,m,n,o,p,q,r,s;i=g.result;if($.isArray(b)){o={};for(r=0,s=b.length;r<s;r++)l=b[r],o[l]=[];b=o}n=[];for(l in b){if(!c.call(b,l))continue;p=b[l],p.sort(),n.push(l)}n.sort(),m="{"+function(){var d;d=[];for(l in b){if(!c.call(b,l))continue;k=b[l],d.push(""+JSON.stringify(a)+":"+JSON.stringify(k))}return d}().join(",")+"}",j=new $.IndexedDB(i,b);if(e||i.version!==m)q=i.setVersion(m),q.onsuccess=function(a){var f,h,k,l,m,n,o;console.log("TODO: Initialize stuff.                Each objectStore has an auto-incrementing ._id.");if(e)for(l=0,n=objectStoreNames.length;l<n;l++)k=objectStoreNames[l],i.deleteObjectStore(k);for(k in b){if(!c.call(b,k))continue;h=b[k],d.call(i.objectStoreNames,k)<0&&i.createObjectStore(k,{keyPath:"_id",autoIncrement:!0});for(m=0,o=h.length;m<o;m++)f=h[m],i.createIndex(k,f,{unique:!1})}return setTimeout(function(){return g.resolve(j)},0)},q.onerror=function(a){return f.reject("Error versioning database.",a)};return setTimeout(function(){return f.resolve(j)},0)},g.onerror=function(a){return f.reject("Error opening database.",a)};return f.promise()},window.indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.mIndexedDB||function(){throw new Error("Fatal Error: IndexedDB is unavailable.")}();for(b in window)if(a=/^[a-z]+(IDB.*)$/.exec(b))window[a[1]]=window[b]}.call(this)